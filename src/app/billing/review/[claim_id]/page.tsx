"use client"\n\nimport { useEffect, useState } from \"react\"\nimport { useParams } from \"next/navigation\"\nimport { apiFetch } from \"../../../lib/api\"\nimport DenialRiskBadge from \"../../../components/billing/DenialRiskBadge\"\nimport FacesheetStatus from \"../../../components/billing/FacesheetStatus\"\nimport AIAssistPanel from \"../../../components/billing/AIAssistPanel\"\nimport OfficeAllyTracker from \"../../../components/billing/OfficeAllyTracker\"\n\nexport default function ClaimReviewPage() {\n  const params = useParams()\n  const claimId = params?.claim_id\n  const [claim, setClaim] = useState(null)\n  const [facesheet, setFacesheet] = useState<{ present: boolean; missing_fields: string[] } | null>(null)\n\n  useEffect(() => {\n    if (!claimId) return\n    apiFetch(`/billing/claims/${claimId}`).then(setClaim).catch(console.error)\n  }, [claimId])\n\n  useEffect(() => {\n    if (!claim?.patient?.id) return\n    apiFetch(`/billing/facesheet/status/${claim.patient.id}`).then(setFacesheet).catch(console.error)\n  }, [claim?.patient?.id])\n\n  if (!claimId) {\n    return <p>Claim not specified.</p>\n  }\n\n  return (\n    <main className=\"page-shell\">\n      <section className=\"glass-panel\" style={{ padding: \"2rem\" }}>\n        <header>\n          <p className=\"section-title\" style={{ margin: 0 }}>Claim Review</p>\n          <p style={{ margin: 0, color: \"#bbb\" }}>In-depth claim + AI insights.</p>\n        </header>\n        {!claim ? (\n          <p style={{ marginTop: \"1rem\", color: \"#bbb\" }}>Loading claimâ€¦</p>\n        ) : (\n          <div style={{ display: \"grid\", gap: \"1.2rem\", marginTop: \"1.2rem\" }}>\n            <div>\n              <h3 style={{ margin: 0, color: \"#f7f6f3\" }}>Claim #{claim.id}</h3>\n              <p style={{ margin: 0, color: \"#bbb\" }}>Payer: {claim.payer}</p>\n              <p style={{ margin: 0, color: \"#bbb\" }}>Status: {claim.status}</p>\n            </div>\n            <DenialRiskBadge risks={claim.denial_risk_flags} />\n            <FacesheetStatus present={facesheet?.present ?? false} missingFields={facesheet?.missing_fields} />\n            <OfficeAllyTracker batchId={claim.office_ally_batch_id} status={claim.status} submittedAt={claim.created_at} />\n            <AIAssistPanel\n              cards={[\n                { title: \"Coding\", summary: \"Primary/secondary suggestions\", footer: \"Model: Mistral 7B\" },\n                { title: \"Denial Risk\", summary: \"Watch medical necessity flags\", footer: \"Model: Dolphin\" },\n                { title: \"Scrub\", summary: \"Field validations passed\", footer: \"Model: Neural-Chat\" },\n              ]}\n            />\n            <div style={{ padding: \"1rem\", borderRadius: 12, border: \"1px solid rgba(255,255,255,0.08)\", background: \"rgba(12,12,12,0.8)\" }}>\n              <h4 style={{ margin: \"0 0 0.5rem\", color: \"#ff7c29\" }}>ePCR Snapshot</h4>\n              <pre style={{ color: \"#f7f6f3\", fontSize: \"0.8rem\", whiteSpace: \"pre-wrap\" }}>\n                {JSON.stringify(claim.demographics, null, 2)}\n              </pre>\n            </div>\n          </div>\n        )}\n      </section>\n    </main>\n  )\n}\n*** End Patch*** 

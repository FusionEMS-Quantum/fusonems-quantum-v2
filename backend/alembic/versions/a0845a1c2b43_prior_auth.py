"\"\"\"Create prior auth requests table\n+\n+Revision ID: a0845a1c2b43\n+Revises: f7a8c9d0e1b2\n+Create Date: 2026-01-25 16:30:00.000000\n+\"\"\"\n+from typing import Sequence, Union\n+\n+from alembic import op\n+import sqlalchemy as sa\n+\n+\n+# revision identifiers, used by Alembic.\n+revision: str = \"a0845a1c2b43\"\n+down_revision: Union[str, Sequence[str], None] = \"f7a8c9d0e1b2\"\n+branch_labels: Union[str, Sequence[str], None] = None\n+depends_on: Union[str, Sequence[str], None] = None\n+\n+\n+def upgrade() -> None:\n+    op.create_table(\n+        \"prior_auth_requests\",\n+        sa.Column(\"id\", sa.Integer(), nullable=False),\n+        sa.Column(\"org_id\", sa.Integer(), nullable=False),\n+        sa.Column(\"classification\", sa.String(), nullable=True),\n+        sa.Column(\"training_mode\", sa.Boolean(), nullable=True),\n+        sa.Column(\"epcr_patient_id\", sa.Integer(), nullable=False),\n+        sa.Column(\"payer_id\", sa.Integer(), nullable=True),\n+        sa.Column(\"procedure_code\", sa.String(), nullable=False),\n+        sa.Column(\"auth_number\", sa.String(), nullable=False),\n+        sa.Column(\"expiration_date\", sa.DateTime(timezone=True), nullable=True),\n+        sa.Column(\"status\", sa.String(), nullable=True, server_default=\"requested\"),\n+        sa.Column(\"notes\", sa.String(), nullable=True, server_default=\"\"),\n+        sa.Column(\"payload\", sa.JSON(), nullable=False, server_default=sa.text(\"'{}'\")),\n+        sa.Column(\"created_at\", sa.DateTime(timezone=True), server_default=sa.text(\"now()\"), nullable=True),\n+        sa.Column(\"updated_at\", sa.DateTime(timezone=True), server_default=sa.text(\"now()\"), nullable=True),\n+        sa.ForeignKeyConstraint([\"org_id\"], [\"organizations.id\"],),\n+        sa.ForeignKeyConstraint([\"epcr_patient_id\"], [\"epcr_patients.id\"],),\n+        sa.PrimaryKeyConstraint(\"id\"),\n+    )\n+    op.create_index(op.f(\"ix_prior_auth_requests_id\"), \"prior_auth_requests\", [\"id\"], unique=False)\n+    op.create_index(op.f(\"ix_prior_auth_requests_org_id\"), \"prior_auth_requests\", [\"org_id\"], unique=False)\n+    op.create_index(op.f(\"ix_prior_auth_requests_epcr_patient_id\"), \"prior_auth_requests\", [\"epcr_patient_id\"], unique=False)\n+\n+\n+def downgrade() -> None:\n+    op.drop_index(op.f(\"ix_prior_auth_requests_epcr_patient_id\"), table_name=\"prior_auth_requests\")\n+    op.drop_index(op.f(\"ix_prior_auth_requests_org_id\"), table_name=\"prior_auth_requests\")\n+    op.drop_index(op.f(\"ix_prior_auth_requests_id\"), table_name=\"prior_auth_requests\")\n+    op.drop_table(\"prior_auth_requests\")\n*** End Patch*** 

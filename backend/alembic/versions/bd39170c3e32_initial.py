"""initial

Revision ID: bd39170c3e32
Revises: 
Create Date: 2026-01-24 19:42:03.291873

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision: str = 'bd39170c3e32'
down_revision: Union[str, Sequence[str], None] = None
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('organizations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('encryption_key', sa.String(), nullable=False),
    sa.Column('lifecycle_state', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('email_domain', sa.String(), nullable=True),
    sa.Column('training_mode', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_organizations_id'), 'organizations', ['id'], unique=False)
    op.create_index(op.f('ix_organizations_name'), 'organizations', ['name'], unique=True)
    op.create_table('access_audits',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('user_email', sa.String(), nullable=False),
    sa.Column('action', sa.String(), nullable=False),
    sa.Column('resource', sa.String(), nullable=False),
    sa.Column('outcome', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_access_audits_id'), 'access_audits', ['id'], unique=False)
    op.create_index(op.f('ix_access_audits_org_id'), 'access_audits', ['org_id'], unique=False)
    op.create_table('addenda',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('resource_type', sa.String(), nullable=False),
    sa.Column('resource_id', sa.String(), nullable=False),
    sa.Column('author', sa.String(), nullable=True),
    sa.Column('note', sa.Text(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_addenda_id'), 'addenda', ['id'], unique=False)
    op.create_index(op.f('ix_addenda_org_id'), 'addenda', ['org_id'], unique=False)
    op.create_table('ai_console_insights',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('category', sa.String(), nullable=False),
    sa.Column('prompt', sa.Text(), nullable=False),
    sa.Column('response', sa.Text(), nullable=True),
    sa.Column('metrics', sa.JSON(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_ai_console_insights_id'), 'ai_console_insights', ['id'], unique=False)
    op.create_index(op.f('ix_ai_console_insights_org_id'), 'ai_console_insights', ['org_id'], unique=False)
    op.create_table('ai_output_registry',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('advisory_level', sa.String(), nullable=True),
    sa.Column('model_name', sa.String(), nullable=False),
    sa.Column('model_version', sa.String(), nullable=False),
    sa.Column('prompt_hash', sa.String(), nullable=False),
    sa.Column('config_snapshot', sa.JSON(), nullable=False),
    sa.Column('input_refs', sa.JSON(), nullable=False),
    sa.Column('output_text', sa.Text(), nullable=False),
    sa.Column('acceptance_state', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_ai_output_registry_id'), 'ai_output_registry', ['id'], unique=False)
    op.create_index(op.f('ix_ai_output_registry_org_id'), 'ai_output_registry', ['org_id'], unique=False)
    op.create_table('analytics_metrics',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('metric_key', sa.String(), nullable=False),
    sa.Column('metric_value', sa.String(), nullable=False),
    sa.Column('window', sa.String(), nullable=True),
    sa.Column('tags', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_analytics_metrics_id'), 'analytics_metrics', ['id'], unique=False)
    op.create_index(op.f('ix_analytics_metrics_metric_key'), 'analytics_metrics', ['metric_key'], unique=False)
    op.create_index(op.f('ix_analytics_metrics_org_id'), 'analytics_metrics', ['org_id'], unique=False)
    op.create_table('appeal_packets',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('claim_reference', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_appeal_packets_id'), 'appeal_packets', ['id'], unique=False)
    op.create_index(op.f('ix_appeal_packets_org_id'), 'appeal_packets', ['org_id'], unique=False)
    op.create_table('billing_customers',
    sa.Column('id', sa.String(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('customer_type', sa.String(), nullable=True),
    sa.Column('display_name', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('phone', sa.String(), nullable=True),
    sa.Column('external_refs', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_billing_customers_org_id'), 'billing_customers', ['org_id'], unique=False)
    op.create_table('billing_ledger_entries',
    sa.Column('id', sa.String(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('entry_type', sa.String(), nullable=True),
    sa.Column('account', sa.String(), nullable=True),
    sa.Column('amount', sa.Integer(), nullable=True),
    sa.Column('currency', sa.String(), nullable=True),
    sa.Column('reference_type', sa.String(), nullable=True),
    sa.Column('reference_id', sa.String(), nullable=True),
    sa.Column('occurred_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_billing_ledger_entries_org_id'), 'billing_ledger_entries', ['org_id'], unique=False)
    op.create_table('billing_records',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('patient_name', sa.String(), nullable=False),
    sa.Column('invoice_number', sa.String(), nullable=False),
    sa.Column('payer', sa.String(), nullable=False),
    sa.Column('amount_due', sa.Numeric(precision=12, scale=2), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('claim_payload', sa.JSON(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_billing_records_id'), 'billing_records', ['id'], unique=False)
    op.create_index(op.f('ix_billing_records_invoice_number'), 'billing_records', ['invoice_number'], unique=False)
    op.create_index(op.f('ix_billing_records_org_id'), 'billing_records', ['org_id'], unique=False)
    op.create_table('billing_webhook_receipts',
    sa.Column('id', sa.String(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=True),
    sa.Column('provider', sa.String(), nullable=True),
    sa.Column('event_id', sa.String(), nullable=False),
    sa.Column('event_type', sa.String(), nullable=True),
    sa.Column('signature_valid', sa.Boolean(), nullable=True),
    sa.Column('received_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('processed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('processing_status', sa.String(), nullable=True),
    sa.Column('payload_hash', sa.String(), nullable=True),
    sa.Column('payload_json', sa.JSON(), nullable=True),
    sa.Column('error', sa.String(), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_billing_webhook_receipts_event_id'), 'billing_webhook_receipts', ['event_id'], unique=True)
    op.create_index(op.f('ix_billing_webhook_receipts_org_id'), 'billing_webhook_receipts', ['org_id'], unique=False)
    op.create_table('business_ops_tasks',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('owner', sa.String(), nullable=False),
    sa.Column('priority', sa.String(), nullable=True),
    sa.Column('metadata', sa.JSON(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_business_ops_tasks_id'), 'business_ops_tasks', ['id'], unique=False)
    op.create_index(op.f('ix_business_ops_tasks_org_id'), 'business_ops_tasks', ['org_id'], unique=False)
    op.create_table('cad_calls',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('caller_name', sa.String(), nullable=False),
    sa.Column('caller_phone', sa.String(), nullable=False),
    sa.Column('location_address', sa.String(), nullable=False),
    sa.Column('latitude', sa.Float(), nullable=False),
    sa.Column('longitude', sa.Float(), nullable=False),
    sa.Column('priority', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('eta_minutes', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_cad_calls_id'), 'cad_calls', ['id'], unique=False)
    op.create_index(op.f('ix_cad_calls_org_id'), 'cad_calls', ['org_id'], unique=False)
    op.create_table('cad_units',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('unit_identifier', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('latitude', sa.Float(), nullable=False),
    sa.Column('longitude', sa.Float(), nullable=False),
    sa.Column('last_update', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_cad_units_id'), 'cad_units', ['id'], unique=False)
    op.create_index(op.f('ix_cad_units_org_id'), 'cad_units', ['org_id'], unique=False)
    op.create_index(op.f('ix_cad_units_unit_identifier'), 'cad_units', ['unit_identifier'], unique=True)
    op.create_table('claim_status_inquiries',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('claim_reference', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_claim_status_inquiries_id'), 'claim_status_inquiries', ['id'], unique=False)
    op.create_index(op.f('ix_claim_status_inquiries_org_id'), 'claim_status_inquiries', ['org_id'], unique=False)
    op.create_table('claim_submissions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('invoice_number', sa.String(), nullable=False),
    sa.Column('clearinghouse', sa.String(), nullable=True),
    sa.Column('edi_version', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_claim_submissions_id'), 'claim_submissions', ['id'], unique=False)
    op.create_index(op.f('ix_claim_submissions_invoice_number'), 'claim_submissions', ['invoice_number'], unique=False)
    op.create_index(op.f('ix_claim_submissions_org_id'), 'claim_submissions', ['org_id'], unique=False)
    op.create_table('clearinghouse_acks',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('ack_type', sa.String(), nullable=True),
    sa.Column('reference', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_clearinghouse_acks_id'), 'clearinghouse_acks', ['id'], unique=False)
    op.create_index(op.f('ix_clearinghouse_acks_org_id'), 'clearinghouse_acks', ['org_id'], unique=False)
    op.create_table('comms_broadcasts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('message', sa.Text(), nullable=False),
    sa.Column('target', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('expires_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_comms_broadcasts_id'), 'comms_broadcasts', ['id'], unique=False)
    op.create_index(op.f('ix_comms_broadcasts_org_id'), 'comms_broadcasts', ['org_id'], unique=False)
    op.create_table('comms_ring_groups',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('members', sa.JSON(), nullable=False),
    sa.Column('strategy', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_comms_ring_groups_id'), 'comms_ring_groups', ['id'], unique=False)
    op.create_index(op.f('ix_comms_ring_groups_org_id'), 'comms_ring_groups', ['org_id'], unique=False)
    op.create_table('comms_routing_policies',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('mode', sa.String(), nullable=True),
    sa.Column('rules', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_comms_routing_policies_id'), 'comms_routing_policies', ['id'], unique=False)
    op.create_index(op.f('ix_comms_routing_policies_org_id'), 'comms_routing_policies', ['org_id'], unique=False)
    op.create_table('comms_threads',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('channel', sa.String(), nullable=True),
    sa.Column('subject', sa.String(), nullable=True),
    sa.Column('priority', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('linked_resource', sa.String(), nullable=True),
    sa.Column('participants', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_comms_threads_id'), 'comms_threads', ['id'], unique=False)
    op.create_index(op.f('ix_comms_threads_org_id'), 'comms_threads', ['org_id'], unique=False)
    op.create_table('compliance_alerts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('category', sa.String(), nullable=False),
    sa.Column('severity', sa.String(), nullable=True),
    sa.Column('message', sa.Text(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_compliance_alerts_id'), 'compliance_alerts', ['id'], unique=False)
    op.create_index(op.f('ix_compliance_alerts_org_id'), 'compliance_alerts', ['org_id'], unique=False)
    op.create_table('consent_provenance',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('subject_type', sa.String(), nullable=False),
    sa.Column('subject_id', sa.String(), nullable=False),
    sa.Column('captured_by', sa.String(), nullable=False),
    sa.Column('device_id', sa.String(), nullable=True),
    sa.Column('policy_hash', sa.String(), nullable=True),
    sa.Column('context', sa.String(), nullable=True),
    sa.Column('metadata', sa.JSON(), nullable=False),
    sa.Column('server_time', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_consent_provenance_id'), 'consent_provenance', ['id'], unique=False)
    op.create_index(op.f('ix_consent_provenance_org_id'), 'consent_provenance', ['org_id'], unique=False)
    op.create_table('data_export_manifests',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('manifest', sa.JSON(), nullable=False),
    sa.Column('export_hash', sa.String(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_data_export_manifests_id'), 'data_export_manifests', ['id'], unique=False)
    op.create_index(op.f('ix_data_export_manifests_org_id'), 'data_export_manifests', ['org_id'], unique=False)
    op.create_table('data_governance_rules',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('rule_type', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('settings', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_data_governance_rules_id'), 'data_governance_rules', ['id'], unique=False)
    op.create_index(op.f('ix_data_governance_rules_org_id'), 'data_governance_rules', ['org_id'], unique=False)
    op.create_table('data_validation_issues',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('entity_type', sa.String(), nullable=False),
    sa.Column('entity_id', sa.String(), nullable=False),
    sa.Column('severity', sa.String(), nullable=True),
    sa.Column('issue', sa.Text(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_data_validation_issues_id'), 'data_validation_issues', ['id'], unique=False)
    op.create_index(op.f('ix_data_validation_issues_org_id'), 'data_validation_issues', ['org_id'], unique=False)
    op.create_table('device_clock_drifts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('device_id', sa.String(), nullable=False),
    sa.Column('drift_seconds', sa.Integer(), nullable=False),
    sa.Column('device_time', sa.DateTime(timezone=True), nullable=True),
    sa.Column('server_time', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_device_clock_drifts_id'), 'device_clock_drifts', ['id'], unique=False)
    op.create_index(op.f('ix_device_clock_drifts_org_id'), 'device_clock_drifts', ['org_id'], unique=False)
    op.create_table('document_templates',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('description', sa.String(), nullable=True),
    sa.Column('module_key', sa.String(), nullable=False),
    sa.Column('template_version', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('jurisdiction', sa.String(), nullable=True),
    sa.Column('sections', sa.JSON(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_document_templates_id'), 'document_templates', ['id'], unique=False)
    op.create_index(op.f('ix_document_templates_module_key'), 'document_templates', ['module_key'], unique=False)
    op.create_index(op.f('ix_document_templates_org_id'), 'document_templates', ['org_id'], unique=False)
    op.create_table('documents_permissions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('subject_type', sa.String(), nullable=False),
    sa.Column('subject_id', sa.Integer(), nullable=True),
    sa.Column('subject_key', sa.String(), nullable=True),
    sa.Column('resource_type', sa.String(), nullable=False),
    sa.Column('resource_id', sa.String(), nullable=False),
    sa.Column('permission', sa.String(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_documents_permissions_id'), 'documents_permissions', ['id'], unique=False)
    op.create_index(op.f('ix_documents_permissions_org_id'), 'documents_permissions', ['org_id'], unique=False)
    op.create_table('eligibility_checks',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('patient_name', sa.String(), nullable=False),
    sa.Column('payer', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_eligibility_checks_id'), 'eligibility_checks', ['id'], unique=False)
    op.create_index(op.f('ix_eligibility_checks_org_id'), 'eligibility_checks', ['org_id'], unique=False)
    op.create_table('email_labels',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('slug', sa.String(), nullable=False),
    sa.Column('color', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_email_labels_id'), 'email_labels', ['id'], unique=False)
    op.create_index(op.f('ix_email_labels_org_id'), 'email_labels', ['org_id'], unique=False)
    op.create_index(op.f('ix_email_labels_slug'), 'email_labels', ['slug'], unique=False)
    op.create_table('epcr_patients',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('nemsis_version', sa.String(), nullable=True),
    sa.Column('nemsis_state', sa.String(), nullable=True),
    sa.Column('first_name', sa.String(), nullable=False),
    sa.Column('last_name', sa.String(), nullable=False),
    sa.Column('date_of_birth', sa.String(), nullable=False),
    sa.Column('phone', sa.String(), nullable=True),
    sa.Column('address', sa.String(), nullable=True),
    sa.Column('incident_number', sa.String(), nullable=False),
    sa.Column('vitals', sa.JSON(), nullable=False),
    sa.Column('interventions', sa.JSON(), nullable=False),
    sa.Column('medications', sa.JSON(), nullable=False),
    sa.Column('procedures', sa.JSON(), nullable=False),
    sa.Column('labs', sa.JSON(), nullable=False),
    sa.Column('cct_interventions', sa.JSON(), nullable=False),
    sa.Column('ocr_snapshots', sa.JSON(), nullable=False),
    sa.Column('narrative', sa.String(), nullable=True),
    sa.Column('chart_locked', sa.Boolean(), nullable=True),
    sa.Column('locked_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('locked_by', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_epcr_patients_id'), 'epcr_patients', ['id'], unique=False)
    op.create_index(op.f('ix_epcr_patients_incident_number'), 'epcr_patients', ['incident_number'], unique=False)
    op.create_index(op.f('ix_epcr_patients_org_id'), 'epcr_patients', ['org_id'], unique=False)
    op.create_table('event_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('schema_name', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('event_type', sa.String(), nullable=False),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('actor_id', sa.Integer(), nullable=True),
    sa.Column('actor_role', sa.String(), nullable=True),
    sa.Column('device_id', sa.String(), nullable=True),
    sa.Column('server_time', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('drift_seconds', sa.Integer(), nullable=True),
    sa.Column('drifted', sa.Boolean(), nullable=True),
    sa.Column('idempotency_key', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id'),
    sa.UniqueConstraint('idempotency_key')
    )
    op.create_index(op.f('ix_event_logs_event_type'), 'event_logs', ['event_type'], unique=False)
    op.create_index(op.f('ix_event_logs_id'), 'event_logs', ['id'], unique=False)
    op.create_index(op.f('ix_event_logs_org_id'), 'event_logs', ['org_id'], unique=False)
    op.create_table('feature_flags',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('flag_key', sa.String(), nullable=False),
    sa.Column('module_key', sa.String(), nullable=False),
    sa.Column('enabled', sa.Boolean(), nullable=True),
    sa.Column('scope', sa.String(), nullable=True),
    sa.Column('rules', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_feature_flags_flag_key'), 'feature_flags', ['flag_key'], unique=False)
    op.create_index(op.f('ix_feature_flags_id'), 'feature_flags', ['id'], unique=False)
    op.create_index(op.f('ix_feature_flags_module_key'), 'feature_flags', ['module_key'], unique=False)
    op.create_index(op.f('ix_feature_flags_org_id'), 'feature_flags', ['org_id'], unique=False)
    op.create_table('fleet_vehicles',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('vehicle_id', sa.String(), nullable=False),
    sa.Column('call_sign', sa.String(), nullable=True),
    sa.Column('vehicle_type', sa.String(), nullable=True),
    sa.Column('make', sa.String(), nullable=True),
    sa.Column('model', sa.String(), nullable=True),
    sa.Column('year', sa.String(), nullable=True),
    sa.Column('vin', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_fleet_vehicles_id'), 'fleet_vehicles', ['id'], unique=False)
    op.create_index(op.f('ix_fleet_vehicles_org_id'), 'fleet_vehicles', ['org_id'], unique=False)
    op.create_index(op.f('ix_fleet_vehicles_vehicle_id'), 'fleet_vehicles', ['vehicle_id'], unique=False)
    op.create_table('forensic_audit_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('actor_email', sa.String(), nullable=False),
    sa.Column('actor_role', sa.String(), nullable=False),
    sa.Column('action', sa.String(), nullable=False),
    sa.Column('resource', sa.String(), nullable=False),
    sa.Column('reason_code', sa.String(), nullable=True),
    sa.Column('decision_id', sa.String(), nullable=True),
    sa.Column('reasoning_component', sa.String(), nullable=True),
    sa.Column('reasoning_version', sa.String(), nullable=True),
    sa.Column('method_used', sa.String(), nullable=True),
    sa.Column('input_hash', sa.String(), nullable=True),
    sa.Column('output_hash', sa.String(), nullable=True),
    sa.Column('decision_packet', sa.JSON(), nullable=True),
    sa.Column('device_fingerprint', sa.String(), nullable=True),
    sa.Column('ip_address', sa.String(), nullable=True),
    sa.Column('session_id', sa.String(), nullable=True),
    sa.Column('before_state', sa.JSON(), nullable=True),
    sa.Column('after_state', sa.JSON(), nullable=True),
    sa.Column('outcome', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_forensic_audit_logs_id'), 'forensic_audit_logs', ['id'], unique=False)
    op.create_index(op.f('ix_forensic_audit_logs_org_id'), 'forensic_audit_logs', ['org_id'], unique=False)
    op.create_table('founder_metrics',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('category', sa.String(), nullable=False),
    sa.Column('value', sa.String(), nullable=False),
    sa.Column('details', sa.JSON(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_founder_metrics_id'), 'founder_metrics', ['id'], unique=False)
    op.create_index(op.f('ix_founder_metrics_org_id'), 'founder_metrics', ['org_id'], unique=False)
    op.create_table('incident_commands',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('severity', sa.String(), nullable=True),
    sa.Column('summary', sa.String(), nullable=True),
    sa.Column('actions', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_incident_commands_id'), 'incident_commands', ['id'], unique=False)
    op.create_index(op.f('ix_incident_commands_org_id'), 'incident_commands', ['org_id'], unique=False)
    op.create_table('inventory_items',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('category', sa.String(), nullable=True),
    sa.Column('sku', sa.String(), nullable=True),
    sa.Column('manufacturer', sa.String(), nullable=True),
    sa.Column('unit', sa.String(), nullable=True),
    sa.Column('par_level', sa.Integer(), nullable=True),
    sa.Column('quantity_on_hand', sa.Integer(), nullable=True),
    sa.Column('location', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_inventory_items_id'), 'inventory_items', ['id'], unique=False)
    op.create_index(op.f('ix_inventory_items_org_id'), 'inventory_items', ['org_id'], unique=False)
    op.create_table('inventory_rig_checks',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('unit_id', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('findings', sa.JSON(), nullable=False),
    sa.Column('performed_by', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_inventory_rig_checks_id'), 'inventory_rig_checks', ['id'], unique=False)
    op.create_index(op.f('ix_inventory_rig_checks_org_id'), 'inventory_rig_checks', ['org_id'], unique=False)
    op.create_table('investor_metrics',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('value', sa.String(), nullable=False),
    sa.Column('context', sa.JSON(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_investor_metrics_id'), 'investor_metrics', ['id'], unique=False)
    op.create_index(op.f('ix_investor_metrics_org_id'), 'investor_metrics', ['org_id'], unique=False)
    op.create_table('job_queue',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('job_type', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('attempts', sa.Integer(), nullable=True),
    sa.Column('last_error', sa.String(), nullable=True),
    sa.Column('scheduled_for', sa.DateTime(timezone=True), nullable=True),
    sa.Column('started_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('finished_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_job_queue_id'), 'job_queue', ['id'], unique=False)
    op.create_index(op.f('ix_job_queue_job_type'), 'job_queue', ['job_type'], unique=False)
    op.create_index(op.f('ix_job_queue_org_id'), 'job_queue', ['org_id'], unique=False)
    op.create_table('legal_cases',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('case_number', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('summary', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_legal_cases_case_number'), 'legal_cases', ['case_number'], unique=False)
    op.create_index(op.f('ix_legal_cases_id'), 'legal_cases', ['id'], unique=False)
    op.create_index(op.f('ix_legal_cases_org_id'), 'legal_cases', ['org_id'], unique=False)
    op.create_table('legal_holds',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('scope_type', sa.String(), nullable=False),
    sa.Column('scope_id', sa.String(), nullable=False),
    sa.Column('reason', sa.Text(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('created_by', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('released_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_legal_holds_id'), 'legal_holds', ['id'], unique=False)
    op.create_index(op.f('ix_legal_holds_org_id'), 'legal_holds', ['org_id'], unique=False)
    op.create_table('mail_messages',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('channel', sa.String(), nullable=False),
    sa.Column('recipient', sa.String(), nullable=False),
    sa.Column('subject', sa.String(), nullable=True),
    sa.Column('body', sa.Text(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_mail_messages_id'), 'mail_messages', ['id'], unique=False)
    op.create_index(op.f('ix_mail_messages_org_id'), 'mail_messages', ['org_id'], unique=False)
    op.create_table('master_patients',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('first_name', sa.String(), nullable=False),
    sa.Column('last_name', sa.String(), nullable=False),
    sa.Column('date_of_birth', sa.String(), nullable=False),
    sa.Column('phone', sa.String(), nullable=True),
    sa.Column('address', sa.String(), nullable=True),
    sa.Column('merged_into_id', sa.Integer(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['merged_into_id'], ['master_patients.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_master_patients_id'), 'master_patients', ['id'], unique=False)
    op.create_index(op.f('ix_master_patients_org_id'), 'master_patients', ['org_id'], unique=False)
    op.create_table('medication_administrations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('patient_id', sa.Integer(), nullable=True),
    sa.Column('medication_name', sa.String(), nullable=False),
    sa.Column('dose', sa.String(), nullable=True),
    sa.Column('dose_units', sa.String(), nullable=True),
    sa.Column('route', sa.String(), nullable=True),
    sa.Column('time_administered', sa.String(), nullable=True),
    sa.Column('notes', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_medication_administrations_id'), 'medication_administrations', ['id'], unique=False)
    op.create_index(op.f('ix_medication_administrations_org_id'), 'medication_administrations', ['org_id'], unique=False)
    op.create_table('medication_formulary_versions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('version', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('notes', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_medication_formulary_versions_id'), 'medication_formulary_versions', ['id'], unique=False)
    op.create_index(op.f('ix_medication_formulary_versions_org_id'), 'medication_formulary_versions', ['org_id'], unique=False)
    op.create_table('medication_master',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('brand', sa.String(), nullable=True),
    sa.Column('drug_class', sa.String(), nullable=True),
    sa.Column('schedule', sa.String(), nullable=True),
    sa.Column('concentration', sa.String(), nullable=True),
    sa.Column('routes', sa.JSON(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_medication_master_id'), 'medication_master', ['id'], unique=False)
    op.create_index(op.f('ix_medication_master_org_id'), 'medication_master', ['org_id'], unique=False)
    op.create_table('module_registry',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('module_key', sa.String(), nullable=False),
    sa.Column('dependencies', sa.JSON(), nullable=False),
    sa.Column('health_state', sa.String(), nullable=True),
    sa.Column('enabled', sa.Boolean(), nullable=True),
    sa.Column('kill_switch', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_module_registry_id'), 'module_registry', ['id'], unique=False)
    op.create_index(op.f('ix_module_registry_module_key'), 'module_registry', ['module_key'], unique=False)
    op.create_index(op.f('ix_module_registry_org_id'), 'module_registry', ['org_id'], unique=False)
    op.create_table('narcotic_items',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('schedule', sa.String(), nullable=True),
    sa.Column('concentration', sa.String(), nullable=True),
    sa.Column('lot_number', sa.String(), nullable=True),
    sa.Column('expiration_date', sa.String(), nullable=True),
    sa.Column('quantity', sa.String(), nullable=True),
    sa.Column('storage_location', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_narcotic_items_id'), 'narcotic_items', ['id'], unique=False)
    op.create_index(op.f('ix_narcotic_items_org_id'), 'narcotic_items', ['org_id'], unique=False)
    op.create_table('orphan_repair_actions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('orphan_type', sa.String(), nullable=False),
    sa.Column('orphan_id', sa.String(), nullable=False),
    sa.Column('action', sa.String(), nullable=False),
    sa.Column('details', sa.JSON(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_orphan_repair_actions_id'), 'orphan_repair_actions', ['id'], unique=False)
    op.create_index(op.f('ix_orphan_repair_actions_org_id'), 'orphan_repair_actions', ['org_id'], unique=False)
    op.create_table('override_requests',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('override_type', sa.String(), nullable=False),
    sa.Column('resource_type', sa.String(), nullable=False),
    sa.Column('resource_id', sa.String(), nullable=False),
    sa.Column('reason_code', sa.String(), nullable=False),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('created_by', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('approved_by', sa.String(), nullable=True),
    sa.Column('approved_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_override_requests_id'), 'override_requests', ['id'], unique=False)
    op.create_index(op.f('ix_override_requests_org_id'), 'override_requests', ['org_id'], unique=False)
    op.create_table('patient_portal_accounts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('patient_name', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('preferences', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_patient_portal_accounts_id'), 'patient_portal_accounts', ['id'], unique=False)
    op.create_index(op.f('ix_patient_portal_accounts_org_id'), 'patient_portal_accounts', ['org_id'], unique=False)
    op.create_table('patient_statements',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('patient_name', sa.String(), nullable=False),
    sa.Column('balance_due', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_patient_statements_id'), 'patient_statements', ['id'], unique=False)
    op.create_index(op.f('ix_patient_statements_org_id'), 'patient_statements', ['org_id'], unique=False)
    op.create_table('payment_postings',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('source', sa.String(), nullable=True),
    sa.Column('amount', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_payment_postings_id'), 'payment_postings', ['id'], unique=False)
    op.create_index(op.f('ix_payment_postings_org_id'), 'payment_postings', ['org_id'], unique=False)
    op.create_table('pricing_plans',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('plan_name', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('pricing', sa.JSON(), nullable=False),
    sa.Column('limits', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_pricing_plans_id'), 'pricing_plans', ['id'], unique=False)
    op.create_index(op.f('ix_pricing_plans_org_id'), 'pricing_plans', ['org_id'], unique=False)
    op.create_table('pwa_distributions',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('platform', sa.String(), nullable=True),
    sa.Column('current_version', sa.String(), nullable=True),
    sa.Column('pending_version', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('rules', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_pwa_distributions_id'), 'pwa_distributions', ['id'], unique=False)
    op.create_index(op.f('ix_pwa_distributions_org_id'), 'pwa_distributions', ['org_id'], unique=False)
    op.create_table('qa_rubrics',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('version', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('criteria', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_qa_rubrics_id'), 'qa_rubrics', ['id'], unique=False)
    op.create_index(op.f('ix_qa_rubrics_org_id'), 'qa_rubrics', ['org_id'], unique=False)
    op.create_table('remittance_advice',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('payer', sa.String(), nullable=False),
    sa.Column('claim_reference', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_remittance_advice_id'), 'remittance_advice', ['id'], unique=False)
    op.create_index(op.f('ix_remittance_advice_org_id'), 'remittance_advice', ['org_id'], unique=False)
    op.create_table('retention_policies',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('applies_to', sa.String(), nullable=True),
    sa.Column('retention_days', sa.Integer(), nullable=True),
    sa.Column('delete_behavior', sa.String(), nullable=True),
    sa.Column('legal_hold_behavior', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_retention_policies_id'), 'retention_policies', ['id'], unique=False)
    op.create_index(op.f('ix_retention_policies_org_id'), 'retention_policies', ['org_id'], unique=False)
    op.create_table('schedule_shifts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('crew_name', sa.String(), nullable=False),
    sa.Column('shift_start', sa.DateTime(timezone=True), nullable=False),
    sa.Column('shift_end', sa.DateTime(timezone=True), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('certifications', sa.JSON(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_schedule_shifts_id'), 'schedule_shifts', ['id'], unique=False)
    op.create_index(op.f('ix_schedule_shifts_org_id'), 'schedule_shifts', ['org_id'], unique=False)
    op.create_table('search_index_entries',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('module_key', sa.String(), nullable=False),
    sa.Column('record_id', sa.String(), nullable=False),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('body', sa.Text(), nullable=False),
    sa.Column('tags', sa.JSON(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_search_index_entries_id'), 'search_index_entries', ['id'], unique=False)
    op.create_index(op.f('ix_search_index_entries_module_key'), 'search_index_entries', ['module_key'], unique=False)
    op.create_index(op.f('ix_search_index_entries_org_id'), 'search_index_entries', ['org_id'], unique=False)
    op.create_index(op.f('ix_search_index_entries_record_id'), 'search_index_entries', ['record_id'], unique=False)
    op.create_table('training_courses',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('category', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('version', sa.String(), nullable=True),
    sa.Column('prerequisites', sa.JSON(), nullable=False),
    sa.Column('credit_hours', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_training_courses_id'), 'training_courses', ['id'], unique=False)
    op.create_index(op.f('ix_training_courses_org_id'), 'training_courses', ['org_id'], unique=False)
    op.create_table('users',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('full_name', sa.String(), nullable=False),
    sa.Column('hashed_password', sa.String(), nullable=True),
    sa.Column('role', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('auth_provider', sa.String(), nullable=True),
    sa.Column('oidc_sub', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_users_email'), 'users', ['email'], unique=True)
    op.create_index(op.f('ix_users_id'), 'users', ['id'], unique=False)
    op.create_index(op.f('ix_users_oidc_sub'), 'users', ['oidc_sub'], unique=False)
    op.create_index(op.f('ix_users_org_id'), 'users', ['org_id'], unique=False)
    op.create_table('validation_rules',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('entity_type', sa.String(), nullable=False),
    sa.Column('rule_type', sa.String(), nullable=True),
    sa.Column('field', sa.String(), nullable=True),
    sa.Column('condition', sa.JSON(), nullable=True),
    sa.Column('severity', sa.String(), nullable=True),
    sa.Column('enforcement', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('version', sa.String(), nullable=True),
    sa.Column('description', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_validation_rules_id'), 'validation_rules', ['id'], unique=False)
    op.create_index(op.f('ix_validation_rules_org_id'), 'validation_rules', ['org_id'], unique=False)
    op.create_table('workflow_rules',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('trigger', sa.String(), nullable=False),
    sa.Column('action', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_workflow_rules_id'), 'workflow_rules', ['id'], unique=False)
    op.create_index(op.f('ix_workflow_rules_org_id'), 'workflow_rules', ['org_id'], unique=False)
    op.create_table('workflow_states',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('workflow_key', sa.String(), nullable=False),
    sa.Column('resource_type', sa.String(), nullable=False),
    sa.Column('resource_id', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('last_step', sa.String(), nullable=True),
    sa.Column('interruption_reason', sa.String(), nullable=True),
    sa.Column('metadata', sa.JSON(), nullable=False),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_workflow_states_id'), 'workflow_states', ['id'], unique=False)
    op.create_index(op.f('ix_workflow_states_org_id'), 'workflow_states', ['org_id'], unique=False)
    op.create_index(op.f('ix_workflow_states_workflow_key'), 'workflow_states', ['workflow_key'], unique=False)
    op.create_table('workflow_tasks',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('owner', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('priority', sa.String(), nullable=True),
    sa.Column('notes', sa.Text(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_workflow_tasks_id'), 'workflow_tasks', ['id'], unique=False)
    op.create_index(op.f('ix_workflow_tasks_org_id'), 'workflow_tasks', ['org_id'], unique=False)
    op.create_table('billing_invoices',
    sa.Column('id', sa.String(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('invoice_number', sa.String(), nullable=False),
    sa.Column('customer_id', sa.String(), nullable=False),
    sa.Column('encounter_id', sa.String(), nullable=True),
    sa.Column('mission_id', sa.String(), nullable=True),
    sa.Column('transport_id', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('currency', sa.String(), nullable=True),
    sa.Column('subtotal', sa.Integer(), nullable=True),
    sa.Column('tax', sa.Integer(), nullable=True),
    sa.Column('total', sa.Integer(), nullable=True),
    sa.Column('amount_paid', sa.Integer(), nullable=True),
    sa.Column('amount_due', sa.Integer(), nullable=True),
    sa.Column('due_date', sa.DateTime(timezone=True), nullable=True),
    sa.Column('meta_data', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['customer_id'], ['billing_customers.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_billing_invoices_invoice_number'), 'billing_invoices', ['invoice_number'], unique=False)
    op.create_index(op.f('ix_billing_invoices_org_id'), 'billing_invoices', ['org_id'], unique=False)
    op.create_table('builder_change_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('builder_key', sa.String(), nullable=False),
    sa.Column('change_summary', sa.String(), nullable=False),
    sa.Column('before_state', sa.JSON(), nullable=False),
    sa.Column('after_state', sa.JSON(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_builder_change_logs_builder_key'), 'builder_change_logs', ['builder_key'], unique=False)
    op.create_index(op.f('ix_builder_change_logs_id'), 'builder_change_logs', ['id'], unique=False)
    op.create_index(op.f('ix_builder_change_logs_org_id'), 'builder_change_logs', ['org_id'], unique=False)
    op.create_table('builder_registry',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('builder_key', sa.String(), nullable=False),
    sa.Column('version', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('description', sa.String(), nullable=True),
    sa.Column('impacted_modules', sa.JSON(), nullable=False),
    sa.Column('last_changed_by', sa.Integer(), nullable=True),
    sa.Column('last_changed_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['last_changed_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_builder_registry_builder_key'), 'builder_registry', ['builder_key'], unique=False)
    op.create_index(op.f('ix_builder_registry_id'), 'builder_registry', ['id'], unique=False)
    op.create_index(op.f('ix_builder_registry_org_id'), 'builder_registry', ['org_id'], unique=False)
    op.create_table('cad_dispatches',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('call_id', sa.Integer(), nullable=False),
    sa.Column('unit_id', sa.Integer(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['call_id'], ['cad_calls.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['unit_id'], ['cad_units.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_cad_dispatches_id'), 'cad_dispatches', ['id'], unique=False)
    op.create_index(op.f('ix_cad_dispatches_org_id'), 'cad_dispatches', ['org_id'], unique=False)
    op.create_table('ce_records',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('category', sa.String(), nullable=True),
    sa.Column('hours', sa.Integer(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('cycle', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_ce_records_id'), 'ce_records', ['id'], unique=False)
    op.create_index(op.f('ix_ce_records_org_id'), 'ce_records', ['org_id'], unique=False)
    op.create_table('comms_call_logs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('caller', sa.String(), nullable=False),
    sa.Column('recipient', sa.String(), nullable=False),
    sa.Column('direction', sa.String(), nullable=True),
    sa.Column('duration_seconds', sa.Integer(), nullable=True),
    sa.Column('recording_url', sa.String(), nullable=True),
    sa.Column('disposition', sa.String(), nullable=True),
    sa.Column('call_state', sa.String(), nullable=True),
    sa.Column('external_call_id', sa.String(), nullable=True),
    sa.Column('last_event', sa.String(), nullable=True),
    sa.Column('dtmf_digits', sa.String(), nullable=True),
    sa.Column('thread_id', sa.Integer(), nullable=True),
    sa.Column('linked_object_type', sa.String(), nullable=True),
    sa.Column('linked_object_id', sa.String(), nullable=True),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('answered_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('ended_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['thread_id'], ['comms_threads.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_comms_call_logs_external_call_id'), 'comms_call_logs', ['external_call_id'], unique=False)
    op.create_index(op.f('ix_comms_call_logs_id'), 'comms_call_logs', ['id'], unique=False)
    op.create_index(op.f('ix_comms_call_logs_org_id'), 'comms_call_logs', ['org_id'], unique=False)
    op.create_table('comms_messages',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('thread_id', sa.Integer(), nullable=False),
    sa.Column('sender', sa.String(), nullable=False),
    sa.Column('body', sa.Text(), nullable=False),
    sa.Column('media_url', sa.String(), nullable=True),
    sa.Column('delivery_status', sa.String(), nullable=True),
    sa.Column('tags', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['thread_id'], ['comms_threads.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_comms_messages_id'), 'comms_messages', ['id'], unique=False)
    op.create_index(op.f('ix_comms_messages_org_id'), 'comms_messages', ['org_id'], unique=False)
    op.create_table('comms_phone_numbers',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('e164', sa.String(), nullable=False),
    sa.Column('label', sa.String(), nullable=True),
    sa.Column('purpose', sa.String(), nullable=True),
    sa.Column('routing_policy_id', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['routing_policy_id'], ['comms_routing_policies.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_comms_phone_numbers_id'), 'comms_phone_numbers', ['id'], unique=False)
    op.create_index(op.f('ix_comms_phone_numbers_org_id'), 'comms_phone_numbers', ['org_id'], unique=False)
    op.create_table('comms_tasks',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('thread_id', sa.Integer(), nullable=True),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('owner', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('due_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['thread_id'], ['comms_threads.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_comms_tasks_id'), 'comms_tasks', ['id'], unique=False)
    op.create_index(op.f('ix_comms_tasks_org_id'), 'comms_tasks', ['org_id'], unique=False)
    op.create_table('credential_records',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('credential_type', sa.String(), nullable=False),
    sa.Column('issuer', sa.String(), nullable=True),
    sa.Column('license_number', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('expires_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_credential_records_id'), 'credential_records', ['id'], unique=False)
    op.create_index(op.f('ix_credential_records_org_id'), 'credential_records', ['org_id'], unique=False)
    op.create_table('device_trust',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('device_id', sa.String(), nullable=False),
    sa.Column('fingerprint', sa.String(), nullable=True),
    sa.Column('trusted', sa.Boolean(), nullable=True),
    sa.Column('last_seen', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_device_trust_device_id'), 'device_trust', ['device_id'], unique=False)
    op.create_index(op.f('ix_device_trust_id'), 'device_trust', ['id'], unique=False)
    op.create_index(op.f('ix_device_trust_org_id'), 'device_trust', ['org_id'], unique=False)
    op.create_index(op.f('ix_device_trust_user_id'), 'device_trust', ['user_id'], unique=False)
    op.create_table('discovery_exports',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('hold_id', sa.Integer(), nullable=True),
    sa.Column('export_type', sa.String(), nullable=True),
    sa.Column('filters', sa.JSON(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('storage_key', sa.String(), nullable=True),
    sa.Column('sha256', sa.String(), nullable=True),
    sa.Column('requested_by', sa.Integer(), nullable=True),
    sa.Column('approved_by', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('completed_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['approved_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['hold_id'], ['legal_holds.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['requested_by'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_discovery_exports_id'), 'discovery_exports', ['id'], unique=False)
    op.create_index(op.f('ix_discovery_exports_org_id'), 'discovery_exports', ['org_id'], unique=False)
    op.create_table('document_records',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('template_id', sa.Integer(), nullable=False),
    sa.Column('title', sa.String(), nullable=False),
    sa.Column('output_format', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('content', sa.JSON(), nullable=False),
    sa.Column('provenance', sa.JSON(), nullable=False),
    sa.Column('document_hash', sa.String(), nullable=True),
    sa.Column('legal_hold', sa.Boolean(), nullable=True),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['template_id'], ['document_templates.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_document_records_id'), 'document_records', ['id'], unique=False)
    op.create_index(op.f('ix_document_records_org_id'), 'document_records', ['org_id'], unique=False)
    op.create_table('documents_folders',
    sa.Column('id', sa.String(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('parent_id', sa.String(), nullable=True),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('path_slug', sa.String(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['parent_id'], ['documents_folders.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_documents_folders_org_id'), 'documents_folders', ['org_id'], unique=False)
    op.create_index(op.f('ix_documents_folders_path_slug'), 'documents_folders', ['path_slug'], unique=False)
    op.create_table('email_threads',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('subject', sa.String(), nullable=True),
    sa.Column('normalized_subject', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('last_message_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_email_threads_id'), 'email_threads', ['id'], unique=False)
    op.create_index(op.f('ix_email_threads_normalized_subject'), 'email_threads', ['normalized_subject'], unique=False)
    op.create_index(op.f('ix_email_threads_org_id'), 'email_threads', ['org_id'], unique=False)
    op.create_table('fleet_inspections',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('vehicle_id', sa.Integer(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('findings', sa.JSON(), nullable=False),
    sa.Column('performed_by', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vehicle_id'], ['fleet_vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_fleet_inspections_id'), 'fleet_inspections', ['id'], unique=False)
    op.create_index(op.f('ix_fleet_inspections_org_id'), 'fleet_inspections', ['org_id'], unique=False)
    op.create_table('fleet_maintenance',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('vehicle_id', sa.Integer(), nullable=False),
    sa.Column('service_type', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('due_mileage', sa.Integer(), nullable=True),
    sa.Column('notes', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vehicle_id'], ['fleet_vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_fleet_maintenance_id'), 'fleet_maintenance', ['id'], unique=False)
    op.create_index(op.f('ix_fleet_maintenance_org_id'), 'fleet_maintenance', ['org_id'], unique=False)
    op.create_table('fleet_telemetry',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('vehicle_id', sa.Integer(), nullable=False),
    sa.Column('latitude', sa.String(), nullable=True),
    sa.Column('longitude', sa.String(), nullable=True),
    sa.Column('speed', sa.String(), nullable=True),
    sa.Column('odometer', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['vehicle_id'], ['fleet_vehicles.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_fleet_telemetry_id'), 'fleet_telemetry', ['id'], unique=False)
    op.create_index(op.f('ix_fleet_telemetry_org_id'), 'fleet_telemetry', ['org_id'], unique=False)
    op.create_table('inventory_movements',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('item_id', sa.Integer(), nullable=False),
    sa.Column('movement_type', sa.String(), nullable=True),
    sa.Column('quantity', sa.Integer(), nullable=True),
    sa.Column('from_location', sa.String(), nullable=True),
    sa.Column('to_location', sa.String(), nullable=True),
    sa.Column('reason', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['item_id'], ['inventory_items.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_inventory_movements_id'), 'inventory_movements', ['id'], unique=False)
    op.create_index(op.f('ix_inventory_movements_org_id'), 'inventory_movements', ['org_id'], unique=False)
    op.create_table('job_runs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('job_id', sa.Integer(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('output', sa.JSON(), nullable=False),
    sa.Column('started_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('finished_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.ForeignKeyConstraint(['job_id'], ['job_queue.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_job_runs_id'), 'job_runs', ['id'], unique=False)
    op.create_index(op.f('ix_job_runs_org_id'), 'job_runs', ['org_id'], unique=False)
    op.create_table('legal_evidence',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('case_id', sa.Integer(), nullable=False),
    sa.Column('evidence_type', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['case_id'], ['legal_cases.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_legal_evidence_id'), 'legal_evidence', ['id'], unique=False)
    op.create_index(op.f('ix_legal_evidence_org_id'), 'legal_evidence', ['org_id'], unique=False)
    op.create_table('master_patient_links',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('epcr_patient_id', sa.Integer(), nullable=False),
    sa.Column('master_patient_id', sa.Integer(), nullable=False),
    sa.Column('provenance', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['epcr_patient_id'], ['epcr_patients.id'], ),
    sa.ForeignKeyConstraint(['master_patient_id'], ['master_patients.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_master_patient_links_epcr_patient_id'), 'master_patient_links', ['epcr_patient_id'], unique=False)
    op.create_index(op.f('ix_master_patient_links_id'), 'master_patient_links', ['id'], unique=False)
    op.create_index(op.f('ix_master_patient_links_master_patient_id'), 'master_patient_links', ['master_patient_id'], unique=False)
    op.create_index(op.f('ix_master_patient_links_org_id'), 'master_patient_links', ['org_id'], unique=False)
    op.create_table('master_patient_merges',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('from_id', sa.Integer(), nullable=False),
    sa.Column('to_id', sa.Integer(), nullable=False),
    sa.Column('reason', sa.String(), nullable=True),
    sa.Column('actor', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['from_id'], ['master_patients.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['to_id'], ['master_patients.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_master_patient_merges_id'), 'master_patient_merges', ['id'], unique=False)
    op.create_index(op.f('ix_master_patient_merges_org_id'), 'master_patient_merges', ['org_id'], unique=False)
    op.create_table('narcotic_custody_events',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('narcotic_id', sa.Integer(), nullable=False),
    sa.Column('event_type', sa.String(), nullable=False),
    sa.Column('from_location', sa.String(), nullable=True),
    sa.Column('to_location', sa.String(), nullable=True),
    sa.Column('quantity', sa.String(), nullable=True),
    sa.Column('witness', sa.String(), nullable=True),
    sa.Column('notes', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['narcotic_id'], ['narcotic_items.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_narcotic_custody_events_id'), 'narcotic_custody_events', ['id'], unique=False)
    op.create_index(op.f('ix_narcotic_custody_events_org_id'), 'narcotic_custody_events', ['org_id'], unique=False)
    op.create_table('narcotic_discrepancies',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('narcotic_id', sa.Integer(), nullable=False),
    sa.Column('severity', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('summary', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['narcotic_id'], ['narcotic_items.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_narcotic_discrepancies_id'), 'narcotic_discrepancies', ['id'], unique=False)
    op.create_index(op.f('ix_narcotic_discrepancies_org_id'), 'narcotic_discrepancies', ['org_id'], unique=False)
    op.create_table('patient_portal_messages',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('account_id', sa.Integer(), nullable=False),
    sa.Column('sender', sa.String(), nullable=True),
    sa.Column('message', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['account_id'], ['patient_portal_accounts.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_patient_portal_messages_id'), 'patient_portal_messages', ['id'], unique=False)
    op.create_index(op.f('ix_patient_portal_messages_org_id'), 'patient_portal_messages', ['org_id'], unique=False)
    op.create_table('qa_cases',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('case_type', sa.String(), nullable=True),
    sa.Column('priority', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('trigger', sa.String(), nullable=True),
    sa.Column('linked_run_id', sa.String(), nullable=True),
    sa.Column('linked_patient_id', sa.Integer(), nullable=True),
    sa.Column('assigned_to', sa.Integer(), nullable=True),
    sa.Column('due_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['assigned_to'], ['users.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_qa_cases_id'), 'qa_cases', ['id'], unique=False)
    op.create_index(op.f('ix_qa_cases_org_id'), 'qa_cases', ['org_id'], unique=False)
    op.create_table('saved_searches',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('query', sa.String(), nullable=False),
    sa.Column('filters', sa.JSON(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_saved_searches_id'), 'saved_searches', ['id'], unique=False)
    op.create_index(op.f('ix_saved_searches_org_id'), 'saved_searches', ['org_id'], unique=False)
    op.create_table('skill_checkoffs',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('skill_name', sa.String(), nullable=False),
    sa.Column('evaluator', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('score', sa.Integer(), nullable=True),
    sa.Column('expires_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_skill_checkoffs_id'), 'skill_checkoffs', ['id'], unique=False)
    op.create_index(op.f('ix_skill_checkoffs_org_id'), 'skill_checkoffs', ['org_id'], unique=False)
    op.create_table('training_enrollments',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('course_id', sa.Integer(), nullable=False),
    sa.Column('user_id', sa.Integer(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('score', sa.Integer(), nullable=True),
    sa.Column('completed_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['course_id'], ['training_courses.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['user_id'], ['users.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_training_enrollments_id'), 'training_enrollments', ['id'], unique=False)
    op.create_index(op.f('ix_training_enrollments_org_id'), 'training_enrollments', ['org_id'], unique=False)
    op.create_table('usage_events',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('event_key', sa.String(), nullable=False),
    sa.Column('module_key', sa.String(), nullable=False),
    sa.Column('actor_id', sa.Integer(), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['actor_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_usage_events_event_key'), 'usage_events', ['event_key'], unique=False)
    op.create_index(op.f('ix_usage_events_id'), 'usage_events', ['id'], unique=False)
    op.create_index(op.f('ix_usage_events_module_key'), 'usage_events', ['module_key'], unique=False)
    op.create_index(op.f('ix_usage_events_org_id'), 'usage_events', ['org_id'], unique=False)
    op.create_table('billing_invoice_lines',
    sa.Column('id', sa.String(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('invoice_id', sa.String(), nullable=False),
    sa.Column('description', sa.String(), nullable=True),
    sa.Column('code', sa.String(), nullable=True),
    sa.Column('quantity', sa.Integer(), nullable=True),
    sa.Column('unit_price', sa.Integer(), nullable=True),
    sa.Column('amount', sa.Integer(), nullable=True),
    sa.Column('meta_data', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['invoice_id'], ['billing_invoices.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_billing_invoice_lines_invoice_id'), 'billing_invoice_lines', ['invoice_id'], unique=False)
    op.create_index(op.f('ix_billing_invoice_lines_org_id'), 'billing_invoice_lines', ['org_id'], unique=False)
    op.create_table('billing_payments',
    sa.Column('id', sa.String(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('invoice_id', sa.String(), nullable=False),
    sa.Column('provider', sa.String(), nullable=True),
    sa.Column('provider_payment_id', sa.String(), nullable=True),
    sa.Column('amount', sa.Integer(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('method', sa.String(), nullable=True),
    sa.Column('received_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('meta_data', sa.JSON(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['invoice_id'], ['billing_invoices.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_billing_payments_invoice_id'), 'billing_payments', ['invoice_id'], unique=False)
    op.create_index(op.f('ix_billing_payments_org_id'), 'billing_payments', ['org_id'], unique=False)
    op.create_table('comms_call_events',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('call_id', sa.Integer(), nullable=True),
    sa.Column('external_call_id', sa.String(), nullable=True),
    sa.Column('event_type', sa.String(), nullable=False),
    sa.Column('provider_event_id', sa.String(), nullable=True),
    sa.Column('occurred_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('payload', sa.JSON(), nullable=False),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['call_id'], ['comms_call_logs.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_comms_call_events_event_type'), 'comms_call_events', ['event_type'], unique=False)
    op.create_index(op.f('ix_comms_call_events_external_call_id'), 'comms_call_events', ['external_call_id'], unique=False)
    op.create_index(op.f('ix_comms_call_events_id'), 'comms_call_events', ['id'], unique=False)
    op.create_index(op.f('ix_comms_call_events_org_id'), 'comms_call_events', ['org_id'], unique=False)
    op.create_index(op.f('ix_comms_call_events_provider_event_id'), 'comms_call_events', ['provider_event_id'], unique=False)
    op.create_table('comms_recordings',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('call_id', sa.Integer(), nullable=True),
    sa.Column('provider_recording_id', sa.String(), nullable=True),
    sa.Column('recording_url', sa.String(), nullable=True),
    sa.Column('storage_key', sa.String(), nullable=True),
    sa.Column('sha256', sa.String(), nullable=True),
    sa.Column('retention_policy_id', sa.Integer(), nullable=True),
    sa.Column('legal_hold_count', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['call_id'], ['comms_call_logs.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['retention_policy_id'], ['retention_policies.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_comms_recordings_id'), 'comms_recordings', ['id'], unique=False)
    op.create_index(op.f('ix_comms_recordings_org_id'), 'comms_recordings', ['org_id'], unique=False)
    op.create_table('comms_transcripts',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('call_id', sa.Integer(), nullable=True),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('transcript_text', sa.Text(), nullable=True),
    sa.Column('segments', sa.JSON(), nullable=False),
    sa.Column('confidence', sa.Integer(), nullable=True),
    sa.Column('evidence_hash', sa.String(), nullable=True),
    sa.Column('method_used', sa.String(), nullable=True),
    sa.Column('retention_policy_id', sa.Integer(), nullable=True),
    sa.Column('legal_hold_count', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['call_id'], ['comms_call_logs.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['retention_policy_id'], ['retention_policies.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_comms_transcripts_id'), 'comms_transcripts', ['id'], unique=False)
    op.create_index(op.f('ix_comms_transcripts_org_id'), 'comms_transcripts', ['org_id'], unique=False)
    op.create_table('comms_voicemails',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('call_id', sa.Integer(), nullable=True),
    sa.Column('storage_key', sa.String(), nullable=True),
    sa.Column('recording_url', sa.String(), nullable=True),
    sa.Column('transcript', sa.Text(), nullable=True),
    sa.Column('retention_policy_id', sa.Integer(), nullable=True),
    sa.Column('legal_hold_count', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['call_id'], ['comms_call_logs.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['retention_policy_id'], ['retention_policies.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_comms_voicemails_id'), 'comms_voicemails', ['id'], unique=False)
    op.create_index(op.f('ix_comms_voicemails_org_id'), 'comms_voicemails', ['org_id'], unique=False)
    op.create_table('documents_files',
    sa.Column('id', sa.String(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('folder_id', sa.String(), nullable=True),
    sa.Column('filename', sa.String(), nullable=False),
    sa.Column('content_type', sa.String(), nullable=True),
    sa.Column('size_bytes', sa.Integer(), nullable=True),
    sa.Column('storage_key', sa.String(), nullable=False),
    sa.Column('sha256', sa.String(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('tags', sa.JSON(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('retention_policy_id', sa.Integer(), nullable=True),
    sa.Column('legal_hold_count', sa.Integer(), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(timezone=True), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['folder_id'], ['documents_folders.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['retention_policy_id'], ['retention_policies.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_documents_files_folder_id'), 'documents_files', ['folder_id'], unique=False)
    op.create_index(op.f('ix_documents_files_org_id'), 'documents_files', ['org_id'], unique=False)
    op.create_index(op.f('ix_documents_files_storage_key'), 'documents_files', ['storage_key'], unique=False)
    op.create_table('email_messages',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('thread_id', sa.Integer(), nullable=False),
    sa.Column('classification', sa.String(), nullable=True),
    sa.Column('direction', sa.String(), nullable=True),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('sender', sa.String(), nullable=True),
    sa.Column('recipients', sa.JSON(), nullable=False),
    sa.Column('cc', sa.JSON(), nullable=False),
    sa.Column('bcc', sa.JSON(), nullable=False),
    sa.Column('subject', sa.String(), nullable=True),
    sa.Column('normalized_subject', sa.String(), nullable=True),
    sa.Column('body_plain', sa.Text(), nullable=True),
    sa.Column('body_html', sa.Text(), nullable=True),
    sa.Column('message_id', sa.String(), nullable=True),
    sa.Column('in_reply_to', sa.String(), nullable=True),
    sa.Column('references', sa.JSON(), nullable=False),
    sa.Column('postmark_message_id', sa.String(), nullable=True),
    sa.Column('postmark_record_type', sa.String(), nullable=True),
    sa.Column('meta', sa.JSON(), nullable=False),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['thread_id'], ['email_threads.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_email_messages_id'), 'email_messages', ['id'], unique=False)
    op.create_index(op.f('ix_email_messages_in_reply_to'), 'email_messages', ['in_reply_to'], unique=False)
    op.create_index(op.f('ix_email_messages_message_id'), 'email_messages', ['message_id'], unique=False)
    op.create_index(op.f('ix_email_messages_normalized_subject'), 'email_messages', ['normalized_subject'], unique=False)
    op.create_index(op.f('ix_email_messages_org_id'), 'email_messages', ['org_id'], unique=False)
    op.create_index(op.f('ix_email_messages_postmark_message_id'), 'email_messages', ['postmark_message_id'], unique=False)
    op.create_index(op.f('ix_email_messages_thread_id'), 'email_messages', ['thread_id'], unique=False)
    op.create_table('qa_remediations',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('case_id', sa.Integer(), nullable=False),
    sa.Column('plan', sa.String(), nullable=False),
    sa.Column('status', sa.String(), nullable=True),
    sa.Column('assigned_to', sa.Integer(), nullable=True),
    sa.Column('due_at', sa.DateTime(timezone=True), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['assigned_to'], ['users.id'], ),
    sa.ForeignKeyConstraint(['case_id'], ['qa_cases.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_qa_remediations_id'), 'qa_remediations', ['id'], unique=False)
    op.create_index(op.f('ix_qa_remediations_org_id'), 'qa_remediations', ['org_id'], unique=False)
    op.create_table('qa_reviews',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('case_id', sa.Integer(), nullable=False),
    sa.Column('reviewer_id', sa.Integer(), nullable=False),
    sa.Column('rubric_id', sa.Integer(), nullable=True),
    sa.Column('scores', sa.JSON(), nullable=False),
    sa.Column('summary', sa.String(), nullable=True),
    sa.Column('determination', sa.String(), nullable=True),
    sa.Column('remediation_required', sa.Boolean(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['case_id'], ['qa_cases.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.ForeignKeyConstraint(['reviewer_id'], ['users.id'], ),
    sa.ForeignKeyConstraint(['rubric_id'], ['qa_rubrics.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_qa_reviews_id'), 'qa_reviews', ['id'], unique=False)
    op.create_index(op.f('ix_qa_reviews_org_id'), 'qa_reviews', ['org_id'], unique=False)
    op.create_table('documents_versions',
    sa.Column('id', sa.String(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('file_id', sa.String(), nullable=False),
    sa.Column('version_number', sa.Integer(), nullable=False),
    sa.Column('storage_key', sa.String(), nullable=False),
    sa.Column('sha256', sa.String(), nullable=False),
    sa.Column('size_bytes', sa.Integer(), nullable=True),
    sa.Column('created_by', sa.Integer(), nullable=True),
    sa.Column('training_mode', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['created_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['file_id'], ['documents_files.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_documents_versions_file_id'), 'documents_versions', ['file_id'], unique=False)
    op.create_index(op.f('ix_documents_versions_org_id'), 'documents_versions', ['org_id'], unique=False)
    op.create_table('email_attachment_links',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('message_id', sa.Integer(), nullable=False),
    sa.Column('document_id', sa.String(), nullable=False),
    sa.Column('filename', sa.String(), nullable=True),
    sa.Column('content_type', sa.String(), nullable=True),
    sa.Column('size_bytes', sa.Integer(), nullable=True),
    sa.Column('sha256', sa.String(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['document_id'], ['documents_files.id'], ),
    sa.ForeignKeyConstraint(['message_id'], ['email_messages.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_email_attachment_links_document_id'), 'email_attachment_links', ['document_id'], unique=False)
    op.create_index(op.f('ix_email_attachment_links_id'), 'email_attachment_links', ['id'], unique=False)
    op.create_index(op.f('ix_email_attachment_links_message_id'), 'email_attachment_links', ['message_id'], unique=False)
    op.create_index(op.f('ix_email_attachment_links_org_id'), 'email_attachment_links', ['org_id'], unique=False)
    op.create_table('email_message_labels',
    sa.Column('id', sa.Integer(), nullable=False),
    sa.Column('org_id', sa.Integer(), nullable=False),
    sa.Column('message_id', sa.Integer(), nullable=False),
    sa.Column('label_id', sa.Integer(), nullable=False),
    sa.Column('applied_by', sa.Integer(), nullable=True),
    sa.Column('applied_by_system', sa.Boolean(), nullable=True),
    sa.Column('created_at', sa.DateTime(timezone=True), server_default=sa.text('now()'), nullable=True),
    sa.ForeignKeyConstraint(['applied_by'], ['users.id'], ),
    sa.ForeignKeyConstraint(['label_id'], ['email_labels.id'], ),
    sa.ForeignKeyConstraint(['message_id'], ['email_messages.id'], ),
    sa.ForeignKeyConstraint(['org_id'], ['organizations.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_index(op.f('ix_email_message_labels_id'), 'email_message_labels', ['id'], unique=False)
    op.create_index(op.f('ix_email_message_labels_label_id'), 'email_message_labels', ['label_id'], unique=False)
    op.create_index(op.f('ix_email_message_labels_message_id'), 'email_message_labels', ['message_id'], unique=False)
    op.create_index(op.f('ix_email_message_labels_org_id'), 'email_message_labels', ['org_id'], unique=False)
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_index(op.f('ix_email_message_labels_org_id'), table_name='email_message_labels')
    op.drop_index(op.f('ix_email_message_labels_message_id'), table_name='email_message_labels')
    op.drop_index(op.f('ix_email_message_labels_label_id'), table_name='email_message_labels')
    op.drop_index(op.f('ix_email_message_labels_id'), table_name='email_message_labels')
    op.drop_table('email_message_labels')
    op.drop_index(op.f('ix_email_attachment_links_org_id'), table_name='email_attachment_links')
    op.drop_index(op.f('ix_email_attachment_links_message_id'), table_name='email_attachment_links')
    op.drop_index(op.f('ix_email_attachment_links_id'), table_name='email_attachment_links')
    op.drop_index(op.f('ix_email_attachment_links_document_id'), table_name='email_attachment_links')
    op.drop_table('email_attachment_links')
    op.drop_index(op.f('ix_documents_versions_org_id'), table_name='documents_versions')
    op.drop_index(op.f('ix_documents_versions_file_id'), table_name='documents_versions')
    op.drop_table('documents_versions')
    op.drop_index(op.f('ix_qa_reviews_org_id'), table_name='qa_reviews')
    op.drop_index(op.f('ix_qa_reviews_id'), table_name='qa_reviews')
    op.drop_table('qa_reviews')
    op.drop_index(op.f('ix_qa_remediations_org_id'), table_name='qa_remediations')
    op.drop_index(op.f('ix_qa_remediations_id'), table_name='qa_remediations')
    op.drop_table('qa_remediations')
    op.drop_index(op.f('ix_email_messages_thread_id'), table_name='email_messages')
    op.drop_index(op.f('ix_email_messages_postmark_message_id'), table_name='email_messages')
    op.drop_index(op.f('ix_email_messages_org_id'), table_name='email_messages')
    op.drop_index(op.f('ix_email_messages_normalized_subject'), table_name='email_messages')
    op.drop_index(op.f('ix_email_messages_message_id'), table_name='email_messages')
    op.drop_index(op.f('ix_email_messages_in_reply_to'), table_name='email_messages')
    op.drop_index(op.f('ix_email_messages_id'), table_name='email_messages')
    op.drop_table('email_messages')
    op.drop_index(op.f('ix_documents_files_storage_key'), table_name='documents_files')
    op.drop_index(op.f('ix_documents_files_org_id'), table_name='documents_files')
    op.drop_index(op.f('ix_documents_files_folder_id'), table_name='documents_files')
    op.drop_table('documents_files')
    op.drop_index(op.f('ix_comms_voicemails_org_id'), table_name='comms_voicemails')
    op.drop_index(op.f('ix_comms_voicemails_id'), table_name='comms_voicemails')
    op.drop_table('comms_voicemails')
    op.drop_index(op.f('ix_comms_transcripts_org_id'), table_name='comms_transcripts')
    op.drop_index(op.f('ix_comms_transcripts_id'), table_name='comms_transcripts')
    op.drop_table('comms_transcripts')
    op.drop_index(op.f('ix_comms_recordings_org_id'), table_name='comms_recordings')
    op.drop_index(op.f('ix_comms_recordings_id'), table_name='comms_recordings')
    op.drop_table('comms_recordings')
    op.drop_index(op.f('ix_comms_call_events_provider_event_id'), table_name='comms_call_events')
    op.drop_index(op.f('ix_comms_call_events_org_id'), table_name='comms_call_events')
    op.drop_index(op.f('ix_comms_call_events_id'), table_name='comms_call_events')
    op.drop_index(op.f('ix_comms_call_events_external_call_id'), table_name='comms_call_events')
    op.drop_index(op.f('ix_comms_call_events_event_type'), table_name='comms_call_events')
    op.drop_table('comms_call_events')
    op.drop_index(op.f('ix_billing_payments_org_id'), table_name='billing_payments')
    op.drop_index(op.f('ix_billing_payments_invoice_id'), table_name='billing_payments')
    op.drop_table('billing_payments')
    op.drop_index(op.f('ix_billing_invoice_lines_org_id'), table_name='billing_invoice_lines')
    op.drop_index(op.f('ix_billing_invoice_lines_invoice_id'), table_name='billing_invoice_lines')
    op.drop_table('billing_invoice_lines')
    op.drop_index(op.f('ix_usage_events_org_id'), table_name='usage_events')
    op.drop_index(op.f('ix_usage_events_module_key'), table_name='usage_events')
    op.drop_index(op.f('ix_usage_events_id'), table_name='usage_events')
    op.drop_index(op.f('ix_usage_events_event_key'), table_name='usage_events')
    op.drop_table('usage_events')
    op.drop_index(op.f('ix_training_enrollments_org_id'), table_name='training_enrollments')
    op.drop_index(op.f('ix_training_enrollments_id'), table_name='training_enrollments')
    op.drop_table('training_enrollments')
    op.drop_index(op.f('ix_skill_checkoffs_org_id'), table_name='skill_checkoffs')
    op.drop_index(op.f('ix_skill_checkoffs_id'), table_name='skill_checkoffs')
    op.drop_table('skill_checkoffs')
    op.drop_index(op.f('ix_saved_searches_org_id'), table_name='saved_searches')
    op.drop_index(op.f('ix_saved_searches_id'), table_name='saved_searches')
    op.drop_table('saved_searches')
    op.drop_index(op.f('ix_qa_cases_org_id'), table_name='qa_cases')
    op.drop_index(op.f('ix_qa_cases_id'), table_name='qa_cases')
    op.drop_table('qa_cases')
    op.drop_index(op.f('ix_patient_portal_messages_org_id'), table_name='patient_portal_messages')
    op.drop_index(op.f('ix_patient_portal_messages_id'), table_name='patient_portal_messages')
    op.drop_table('patient_portal_messages')
    op.drop_index(op.f('ix_narcotic_discrepancies_org_id'), table_name='narcotic_discrepancies')
    op.drop_index(op.f('ix_narcotic_discrepancies_id'), table_name='narcotic_discrepancies')
    op.drop_table('narcotic_discrepancies')
    op.drop_index(op.f('ix_narcotic_custody_events_org_id'), table_name='narcotic_custody_events')
    op.drop_index(op.f('ix_narcotic_custody_events_id'), table_name='narcotic_custody_events')
    op.drop_table('narcotic_custody_events')
    op.drop_index(op.f('ix_master_patient_merges_org_id'), table_name='master_patient_merges')
    op.drop_index(op.f('ix_master_patient_merges_id'), table_name='master_patient_merges')
    op.drop_table('master_patient_merges')
    op.drop_index(op.f('ix_master_patient_links_org_id'), table_name='master_patient_links')
    op.drop_index(op.f('ix_master_patient_links_master_patient_id'), table_name='master_patient_links')
    op.drop_index(op.f('ix_master_patient_links_id'), table_name='master_patient_links')
    op.drop_index(op.f('ix_master_patient_links_epcr_patient_id'), table_name='master_patient_links')
    op.drop_table('master_patient_links')
    op.drop_index(op.f('ix_legal_evidence_org_id'), table_name='legal_evidence')
    op.drop_index(op.f('ix_legal_evidence_id'), table_name='legal_evidence')
    op.drop_table('legal_evidence')
    op.drop_index(op.f('ix_job_runs_org_id'), table_name='job_runs')
    op.drop_index(op.f('ix_job_runs_id'), table_name='job_runs')
    op.drop_table('job_runs')
    op.drop_index(op.f('ix_inventory_movements_org_id'), table_name='inventory_movements')
    op.drop_index(op.f('ix_inventory_movements_id'), table_name='inventory_movements')
    op.drop_table('inventory_movements')
    op.drop_index(op.f('ix_fleet_telemetry_org_id'), table_name='fleet_telemetry')
    op.drop_index(op.f('ix_fleet_telemetry_id'), table_name='fleet_telemetry')
    op.drop_table('fleet_telemetry')
    op.drop_index(op.f('ix_fleet_maintenance_org_id'), table_name='fleet_maintenance')
    op.drop_index(op.f('ix_fleet_maintenance_id'), table_name='fleet_maintenance')
    op.drop_table('fleet_maintenance')
    op.drop_index(op.f('ix_fleet_inspections_org_id'), table_name='fleet_inspections')
    op.drop_index(op.f('ix_fleet_inspections_id'), table_name='fleet_inspections')
    op.drop_table('fleet_inspections')
    op.drop_index(op.f('ix_email_threads_org_id'), table_name='email_threads')
    op.drop_index(op.f('ix_email_threads_normalized_subject'), table_name='email_threads')
    op.drop_index(op.f('ix_email_threads_id'), table_name='email_threads')
    op.drop_table('email_threads')
    op.drop_index(op.f('ix_documents_folders_path_slug'), table_name='documents_folders')
    op.drop_index(op.f('ix_documents_folders_org_id'), table_name='documents_folders')
    op.drop_table('documents_folders')
    op.drop_index(op.f('ix_document_records_org_id'), table_name='document_records')
    op.drop_index(op.f('ix_document_records_id'), table_name='document_records')
    op.drop_table('document_records')
    op.drop_index(op.f('ix_discovery_exports_org_id'), table_name='discovery_exports')
    op.drop_index(op.f('ix_discovery_exports_id'), table_name='discovery_exports')
    op.drop_table('discovery_exports')
    op.drop_index(op.f('ix_device_trust_user_id'), table_name='device_trust')
    op.drop_index(op.f('ix_device_trust_org_id'), table_name='device_trust')
    op.drop_index(op.f('ix_device_trust_id'), table_name='device_trust')
    op.drop_index(op.f('ix_device_trust_device_id'), table_name='device_trust')
    op.drop_table('device_trust')
    op.drop_index(op.f('ix_credential_records_org_id'), table_name='credential_records')
    op.drop_index(op.f('ix_credential_records_id'), table_name='credential_records')
    op.drop_table('credential_records')
    op.drop_index(op.f('ix_comms_tasks_org_id'), table_name='comms_tasks')
    op.drop_index(op.f('ix_comms_tasks_id'), table_name='comms_tasks')
    op.drop_table('comms_tasks')
    op.drop_index(op.f('ix_comms_phone_numbers_org_id'), table_name='comms_phone_numbers')
    op.drop_index(op.f('ix_comms_phone_numbers_id'), table_name='comms_phone_numbers')
    op.drop_table('comms_phone_numbers')
    op.drop_index(op.f('ix_comms_messages_org_id'), table_name='comms_messages')
    op.drop_index(op.f('ix_comms_messages_id'), table_name='comms_messages')
    op.drop_table('comms_messages')
    op.drop_index(op.f('ix_comms_call_logs_org_id'), table_name='comms_call_logs')
    op.drop_index(op.f('ix_comms_call_logs_id'), table_name='comms_call_logs')
    op.drop_index(op.f('ix_comms_call_logs_external_call_id'), table_name='comms_call_logs')
    op.drop_table('comms_call_logs')
    op.drop_index(op.f('ix_ce_records_org_id'), table_name='ce_records')
    op.drop_index(op.f('ix_ce_records_id'), table_name='ce_records')
    op.drop_table('ce_records')
    op.drop_index(op.f('ix_cad_dispatches_org_id'), table_name='cad_dispatches')
    op.drop_index(op.f('ix_cad_dispatches_id'), table_name='cad_dispatches')
    op.drop_table('cad_dispatches')
    op.drop_index(op.f('ix_builder_registry_org_id'), table_name='builder_registry')
    op.drop_index(op.f('ix_builder_registry_id'), table_name='builder_registry')
    op.drop_index(op.f('ix_builder_registry_builder_key'), table_name='builder_registry')
    op.drop_table('builder_registry')
    op.drop_index(op.f('ix_builder_change_logs_org_id'), table_name='builder_change_logs')
    op.drop_index(op.f('ix_builder_change_logs_id'), table_name='builder_change_logs')
    op.drop_index(op.f('ix_builder_change_logs_builder_key'), table_name='builder_change_logs')
    op.drop_table('builder_change_logs')
    op.drop_index(op.f('ix_billing_invoices_org_id'), table_name='billing_invoices')
    op.drop_index(op.f('ix_billing_invoices_invoice_number'), table_name='billing_invoices')
    op.drop_table('billing_invoices')
    op.drop_index(op.f('ix_workflow_tasks_org_id'), table_name='workflow_tasks')
    op.drop_index(op.f('ix_workflow_tasks_id'), table_name='workflow_tasks')
    op.drop_table('workflow_tasks')
    op.drop_index(op.f('ix_workflow_states_workflow_key'), table_name='workflow_states')
    op.drop_index(op.f('ix_workflow_states_org_id'), table_name='workflow_states')
    op.drop_index(op.f('ix_workflow_states_id'), table_name='workflow_states')
    op.drop_table('workflow_states')
    op.drop_index(op.f('ix_workflow_rules_org_id'), table_name='workflow_rules')
    op.drop_index(op.f('ix_workflow_rules_id'), table_name='workflow_rules')
    op.drop_table('workflow_rules')
    op.drop_index(op.f('ix_validation_rules_org_id'), table_name='validation_rules')
    op.drop_index(op.f('ix_validation_rules_id'), table_name='validation_rules')
    op.drop_table('validation_rules')
    op.drop_index(op.f('ix_users_org_id'), table_name='users')
    op.drop_index(op.f('ix_users_oidc_sub'), table_name='users')
    op.drop_index(op.f('ix_users_id'), table_name='users')
    op.drop_index(op.f('ix_users_email'), table_name='users')
    op.drop_table('users')
    op.drop_index(op.f('ix_training_courses_org_id'), table_name='training_courses')
    op.drop_index(op.f('ix_training_courses_id'), table_name='training_courses')
    op.drop_table('training_courses')
    op.drop_index(op.f('ix_search_index_entries_record_id'), table_name='search_index_entries')
    op.drop_index(op.f('ix_search_index_entries_org_id'), table_name='search_index_entries')
    op.drop_index(op.f('ix_search_index_entries_module_key'), table_name='search_index_entries')
    op.drop_index(op.f('ix_search_index_entries_id'), table_name='search_index_entries')
    op.drop_table('search_index_entries')
    op.drop_index(op.f('ix_schedule_shifts_org_id'), table_name='schedule_shifts')
    op.drop_index(op.f('ix_schedule_shifts_id'), table_name='schedule_shifts')
    op.drop_table('schedule_shifts')
    op.drop_index(op.f('ix_retention_policies_org_id'), table_name='retention_policies')
    op.drop_index(op.f('ix_retention_policies_id'), table_name='retention_policies')
    op.drop_table('retention_policies')
    op.drop_index(op.f('ix_remittance_advice_org_id'), table_name='remittance_advice')
    op.drop_index(op.f('ix_remittance_advice_id'), table_name='remittance_advice')
    op.drop_table('remittance_advice')
    op.drop_index(op.f('ix_qa_rubrics_org_id'), table_name='qa_rubrics')
    op.drop_index(op.f('ix_qa_rubrics_id'), table_name='qa_rubrics')
    op.drop_table('qa_rubrics')
    op.drop_index(op.f('ix_pwa_distributions_org_id'), table_name='pwa_distributions')
    op.drop_index(op.f('ix_pwa_distributions_id'), table_name='pwa_distributions')
    op.drop_table('pwa_distributions')
    op.drop_index(op.f('ix_pricing_plans_org_id'), table_name='pricing_plans')
    op.drop_index(op.f('ix_pricing_plans_id'), table_name='pricing_plans')
    op.drop_table('pricing_plans')
    op.drop_index(op.f('ix_payment_postings_org_id'), table_name='payment_postings')
    op.drop_index(op.f('ix_payment_postings_id'), table_name='payment_postings')
    op.drop_table('payment_postings')
    op.drop_index(op.f('ix_patient_statements_org_id'), table_name='patient_statements')
    op.drop_index(op.f('ix_patient_statements_id'), table_name='patient_statements')
    op.drop_table('patient_statements')
    op.drop_index(op.f('ix_patient_portal_accounts_org_id'), table_name='patient_portal_accounts')
    op.drop_index(op.f('ix_patient_portal_accounts_id'), table_name='patient_portal_accounts')
    op.drop_table('patient_portal_accounts')
    op.drop_index(op.f('ix_override_requests_org_id'), table_name='override_requests')
    op.drop_index(op.f('ix_override_requests_id'), table_name='override_requests')
    op.drop_table('override_requests')
    op.drop_index(op.f('ix_orphan_repair_actions_org_id'), table_name='orphan_repair_actions')
    op.drop_index(op.f('ix_orphan_repair_actions_id'), table_name='orphan_repair_actions')
    op.drop_table('orphan_repair_actions')
    op.drop_index(op.f('ix_narcotic_items_org_id'), table_name='narcotic_items')
    op.drop_index(op.f('ix_narcotic_items_id'), table_name='narcotic_items')
    op.drop_table('narcotic_items')
    op.drop_index(op.f('ix_module_registry_org_id'), table_name='module_registry')
    op.drop_index(op.f('ix_module_registry_module_key'), table_name='module_registry')
    op.drop_index(op.f('ix_module_registry_id'), table_name='module_registry')
    op.drop_table('module_registry')
    op.drop_index(op.f('ix_medication_master_org_id'), table_name='medication_master')
    op.drop_index(op.f('ix_medication_master_id'), table_name='medication_master')
    op.drop_table('medication_master')
    op.drop_index(op.f('ix_medication_formulary_versions_org_id'), table_name='medication_formulary_versions')
    op.drop_index(op.f('ix_medication_formulary_versions_id'), table_name='medication_formulary_versions')
    op.drop_table('medication_formulary_versions')
    op.drop_index(op.f('ix_medication_administrations_org_id'), table_name='medication_administrations')
    op.drop_index(op.f('ix_medication_administrations_id'), table_name='medication_administrations')
    op.drop_table('medication_administrations')
    op.drop_index(op.f('ix_master_patients_org_id'), table_name='master_patients')
    op.drop_index(op.f('ix_master_patients_id'), table_name='master_patients')
    op.drop_table('master_patients')
    op.drop_index(op.f('ix_mail_messages_org_id'), table_name='mail_messages')
    op.drop_index(op.f('ix_mail_messages_id'), table_name='mail_messages')
    op.drop_table('mail_messages')
    op.drop_index(op.f('ix_legal_holds_org_id'), table_name='legal_holds')
    op.drop_index(op.f('ix_legal_holds_id'), table_name='legal_holds')
    op.drop_table('legal_holds')
    op.drop_index(op.f('ix_legal_cases_org_id'), table_name='legal_cases')
    op.drop_index(op.f('ix_legal_cases_id'), table_name='legal_cases')
    op.drop_index(op.f('ix_legal_cases_case_number'), table_name='legal_cases')
    op.drop_table('legal_cases')
    op.drop_index(op.f('ix_job_queue_org_id'), table_name='job_queue')
    op.drop_index(op.f('ix_job_queue_job_type'), table_name='job_queue')
    op.drop_index(op.f('ix_job_queue_id'), table_name='job_queue')
    op.drop_table('job_queue')
    op.drop_index(op.f('ix_investor_metrics_org_id'), table_name='investor_metrics')
    op.drop_index(op.f('ix_investor_metrics_id'), table_name='investor_metrics')
    op.drop_table('investor_metrics')
    op.drop_index(op.f('ix_inventory_rig_checks_org_id'), table_name='inventory_rig_checks')
    op.drop_index(op.f('ix_inventory_rig_checks_id'), table_name='inventory_rig_checks')
    op.drop_table('inventory_rig_checks')
    op.drop_index(op.f('ix_inventory_items_org_id'), table_name='inventory_items')
    op.drop_index(op.f('ix_inventory_items_id'), table_name='inventory_items')
    op.drop_table('inventory_items')
    op.drop_index(op.f('ix_incident_commands_org_id'), table_name='incident_commands')
    op.drop_index(op.f('ix_incident_commands_id'), table_name='incident_commands')
    op.drop_table('incident_commands')
    op.drop_index(op.f('ix_founder_metrics_org_id'), table_name='founder_metrics')
    op.drop_index(op.f('ix_founder_metrics_id'), table_name='founder_metrics')
    op.drop_table('founder_metrics')
    op.drop_index(op.f('ix_forensic_audit_logs_org_id'), table_name='forensic_audit_logs')
    op.drop_index(op.f('ix_forensic_audit_logs_id'), table_name='forensic_audit_logs')
    op.drop_table('forensic_audit_logs')
    op.drop_index(op.f('ix_fleet_vehicles_vehicle_id'), table_name='fleet_vehicles')
    op.drop_index(op.f('ix_fleet_vehicles_org_id'), table_name='fleet_vehicles')
    op.drop_index(op.f('ix_fleet_vehicles_id'), table_name='fleet_vehicles')
    op.drop_table('fleet_vehicles')
    op.drop_index(op.f('ix_feature_flags_org_id'), table_name='feature_flags')
    op.drop_index(op.f('ix_feature_flags_module_key'), table_name='feature_flags')
    op.drop_index(op.f('ix_feature_flags_id'), table_name='feature_flags')
    op.drop_index(op.f('ix_feature_flags_flag_key'), table_name='feature_flags')
    op.drop_table('feature_flags')
    op.drop_index(op.f('ix_event_logs_org_id'), table_name='event_logs')
    op.drop_index(op.f('ix_event_logs_id'), table_name='event_logs')
    op.drop_index(op.f('ix_event_logs_event_type'), table_name='event_logs')
    op.drop_table('event_logs')
    op.drop_index(op.f('ix_epcr_patients_org_id'), table_name='epcr_patients')
    op.drop_index(op.f('ix_epcr_patients_incident_number'), table_name='epcr_patients')
    op.drop_index(op.f('ix_epcr_patients_id'), table_name='epcr_patients')
    op.drop_table('epcr_patients')
    op.drop_index(op.f('ix_email_labels_slug'), table_name='email_labels')
    op.drop_index(op.f('ix_email_labels_org_id'), table_name='email_labels')
    op.drop_index(op.f('ix_email_labels_id'), table_name='email_labels')
    op.drop_table('email_labels')
    op.drop_index(op.f('ix_eligibility_checks_org_id'), table_name='eligibility_checks')
    op.drop_index(op.f('ix_eligibility_checks_id'), table_name='eligibility_checks')
    op.drop_table('eligibility_checks')
    op.drop_index(op.f('ix_documents_permissions_org_id'), table_name='documents_permissions')
    op.drop_index(op.f('ix_documents_permissions_id'), table_name='documents_permissions')
    op.drop_table('documents_permissions')
    op.drop_index(op.f('ix_document_templates_org_id'), table_name='document_templates')
    op.drop_index(op.f('ix_document_templates_module_key'), table_name='document_templates')
    op.drop_index(op.f('ix_document_templates_id'), table_name='document_templates')
    op.drop_table('document_templates')
    op.drop_index(op.f('ix_device_clock_drifts_org_id'), table_name='device_clock_drifts')
    op.drop_index(op.f('ix_device_clock_drifts_id'), table_name='device_clock_drifts')
    op.drop_table('device_clock_drifts')
    op.drop_index(op.f('ix_data_validation_issues_org_id'), table_name='data_validation_issues')
    op.drop_index(op.f('ix_data_validation_issues_id'), table_name='data_validation_issues')
    op.drop_table('data_validation_issues')
    op.drop_index(op.f('ix_data_governance_rules_org_id'), table_name='data_governance_rules')
    op.drop_index(op.f('ix_data_governance_rules_id'), table_name='data_governance_rules')
    op.drop_table('data_governance_rules')
    op.drop_index(op.f('ix_data_export_manifests_org_id'), table_name='data_export_manifests')
    op.drop_index(op.f('ix_data_export_manifests_id'), table_name='data_export_manifests')
    op.drop_table('data_export_manifests')
    op.drop_index(op.f('ix_consent_provenance_org_id'), table_name='consent_provenance')
    op.drop_index(op.f('ix_consent_provenance_id'), table_name='consent_provenance')
    op.drop_table('consent_provenance')
    op.drop_index(op.f('ix_compliance_alerts_org_id'), table_name='compliance_alerts')
    op.drop_index(op.f('ix_compliance_alerts_id'), table_name='compliance_alerts')
    op.drop_table('compliance_alerts')
    op.drop_index(op.f('ix_comms_threads_org_id'), table_name='comms_threads')
    op.drop_index(op.f('ix_comms_threads_id'), table_name='comms_threads')
    op.drop_table('comms_threads')
    op.drop_index(op.f('ix_comms_routing_policies_org_id'), table_name='comms_routing_policies')
    op.drop_index(op.f('ix_comms_routing_policies_id'), table_name='comms_routing_policies')
    op.drop_table('comms_routing_policies')
    op.drop_index(op.f('ix_comms_ring_groups_org_id'), table_name='comms_ring_groups')
    op.drop_index(op.f('ix_comms_ring_groups_id'), table_name='comms_ring_groups')
    op.drop_table('comms_ring_groups')
    op.drop_index(op.f('ix_comms_broadcasts_org_id'), table_name='comms_broadcasts')
    op.drop_index(op.f('ix_comms_broadcasts_id'), table_name='comms_broadcasts')
    op.drop_table('comms_broadcasts')
    op.drop_index(op.f('ix_clearinghouse_acks_org_id'), table_name='clearinghouse_acks')
    op.drop_index(op.f('ix_clearinghouse_acks_id'), table_name='clearinghouse_acks')
    op.drop_table('clearinghouse_acks')
    op.drop_index(op.f('ix_claim_submissions_org_id'), table_name='claim_submissions')
    op.drop_index(op.f('ix_claim_submissions_invoice_number'), table_name='claim_submissions')
    op.drop_index(op.f('ix_claim_submissions_id'), table_name='claim_submissions')
    op.drop_table('claim_submissions')
    op.drop_index(op.f('ix_claim_status_inquiries_org_id'), table_name='claim_status_inquiries')
    op.drop_index(op.f('ix_claim_status_inquiries_id'), table_name='claim_status_inquiries')
    op.drop_table('claim_status_inquiries')
    op.drop_index(op.f('ix_cad_units_unit_identifier'), table_name='cad_units')
    op.drop_index(op.f('ix_cad_units_org_id'), table_name='cad_units')
    op.drop_index(op.f('ix_cad_units_id'), table_name='cad_units')
    op.drop_table('cad_units')
    op.drop_index(op.f('ix_cad_calls_org_id'), table_name='cad_calls')
    op.drop_index(op.f('ix_cad_calls_id'), table_name='cad_calls')
    op.drop_table('cad_calls')
    op.drop_index(op.f('ix_business_ops_tasks_org_id'), table_name='business_ops_tasks')
    op.drop_index(op.f('ix_business_ops_tasks_id'), table_name='business_ops_tasks')
    op.drop_table('business_ops_tasks')
    op.drop_index(op.f('ix_billing_webhook_receipts_org_id'), table_name='billing_webhook_receipts')
    op.drop_index(op.f('ix_billing_webhook_receipts_event_id'), table_name='billing_webhook_receipts')
    op.drop_table('billing_webhook_receipts')
    op.drop_index(op.f('ix_billing_records_org_id'), table_name='billing_records')
    op.drop_index(op.f('ix_billing_records_invoice_number'), table_name='billing_records')
    op.drop_index(op.f('ix_billing_records_id'), table_name='billing_records')
    op.drop_table('billing_records')
    op.drop_index(op.f('ix_billing_ledger_entries_org_id'), table_name='billing_ledger_entries')
    op.drop_table('billing_ledger_entries')
    op.drop_index(op.f('ix_billing_customers_org_id'), table_name='billing_customers')
    op.drop_table('billing_customers')
    op.drop_index(op.f('ix_appeal_packets_org_id'), table_name='appeal_packets')
    op.drop_index(op.f('ix_appeal_packets_id'), table_name='appeal_packets')
    op.drop_table('appeal_packets')
    op.drop_index(op.f('ix_analytics_metrics_org_id'), table_name='analytics_metrics')
    op.drop_index(op.f('ix_analytics_metrics_metric_key'), table_name='analytics_metrics')
    op.drop_index(op.f('ix_analytics_metrics_id'), table_name='analytics_metrics')
    op.drop_table('analytics_metrics')
    op.drop_index(op.f('ix_ai_output_registry_org_id'), table_name='ai_output_registry')
    op.drop_index(op.f('ix_ai_output_registry_id'), table_name='ai_output_registry')
    op.drop_table('ai_output_registry')
    op.drop_index(op.f('ix_ai_console_insights_org_id'), table_name='ai_console_insights')
    op.drop_index(op.f('ix_ai_console_insights_id'), table_name='ai_console_insights')
    op.drop_table('ai_console_insights')
    op.drop_index(op.f('ix_addenda_org_id'), table_name='addenda')
    op.drop_index(op.f('ix_addenda_id'), table_name='addenda')
    op.drop_table('addenda')
    op.drop_index(op.f('ix_access_audits_org_id'), table_name='access_audits')
    op.drop_index(op.f('ix_access_audits_id'), table_name='access_audits')
    op.drop_table('access_audits')
    op.drop_index(op.f('ix_organizations_name'), table_name='organizations')
    op.drop_index(op.f('ix_organizations_id'), table_name='organizations')
    op.drop_table('organizations')
    # ### end Alembic commands ###
